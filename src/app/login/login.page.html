<ion-content class="ion-padding">
  <!-- Agregar importación de fuentes -->
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Roboto:wght@300;400;500&display=swap" rel="stylesheet">
  <button (click)="goToAutoridadLogin()" class="autoridad-button">Autoridad</button>
  <div class="form-container">
    <h1 class="title">Trek-King</h1>
    
    <form (ngSubmit)="login()" #loginForm="ngForm">
      <ion-list class="form-list">
        <!-- Campo de correo electrónico -->
        <ion-item class="custom-input" [ngClass]="{
          'input-valid': emailIsValid && emailTouched,
          'input-invalid': !emailIsValid && emailTouched
        }">
          <ion-input
            type="email" 
            [(ngModel)]="email" 
            name="email"
            required
            inputmode="email"
            autocomplete="email"
            enterkeyhint="next"
            (keyup.enter)="passwordInput.setFocus()"
            (ionChange)="validateEmail()"
            #emailInput
            (ionFocus)="onEmailFocus()"
            (ionBlur)="onEmailBlur()"
            label="Correo electrónico"
            labelPlacement="floating"
            placeholder="ejemplo@correo.com">
          </ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="!emailIsValid && emailTouched && currentField === 'email'">
          <small class="error-message">Por favor, ingrese un correo válido</small>
        </ion-text>

        <!-- Campo de contraseña -->
        <ion-item class="custom-input" [ngClass]="{
          'input-valid': passwordIsValid && passwordTouched,
          'input-invalid': !passwordIsValid && passwordTouched
        }">
          <ion-input 
            type="password" 
            [(ngModel)]="password" 
            name="password"
            required
            inputmode="text"
            autocomplete="current-password"
            enterkeyhint="done"
            (keyup.enter)="login()"
            (ionChange)="validatePassword()"
            #passwordInput
            (ionFocus)="onPasswordFocus()"
            (ionBlur)="onPasswordBlur()"
            label="Contraseña"
            labelPlacement="floating"
            placeholder="************">
          </ion-input>
        </ion-item>
        <ion-text color="danger" *ngIf="!passwordIsValid && passwordTouched && currentField === 'password'">
          <small class="error-message">La contraseña es requerida</small>
        </ion-text>
      </ion-list>

      <div class="button-container">
        <ion-button expand="block" type="submit" class="login-button" [disabled]="!formIsValid">
          Iniciar Sesión
        </ion-button>
        
        <ion-button fill="clear" (click)="goToRegister()" class="register-link" touch-action="manipulation">
          ¿No tienes cuenta? Regístrate
        </ion-button>
        
        <ion-button fill="clear" (click)="forgotPassword()" class="forgot-password" touch-action="manipulation">
          ¿Olvidaste tu contraseña?
        </ion-button>
        <ion-button fill="clear" (click)="goToHome()" class="forgot-password" touch-action="manipulation">
          Continuar como invitado
        </ion-button>
      </div>
    </form>
  </div>
</ion-content>
