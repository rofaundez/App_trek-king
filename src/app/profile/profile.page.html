
<app-header></app-header>

<div class="header-contain" style="color: red;">
  <ion-toolbar class="perfil_contain" style="background-color: trasparent;">
    <h3 class="perfil" style="background-color: trasparent; color: white;">Mi Perfil</h3>
    <ion-buttons slot="start" style="background-color: trasparent ; color: white;">
      <ion-back-button defaultHref="/home"></ion-back-button>
    </ion-buttons>
  </ion-toolbar>
</div>

<ion-content class="ion-padding">
  <div class="profile-container">
    <div class="avatar-container">
      <ion-avatar class="profile-avatar">
        <img [src]="userProfile.photo" alt="Profile photo">
      </ion-avatar>
      <ion-button *ngIf="isEditing" fill="clear" class="change-photo-btn">
        <input type="file" (change)="onPhotoSelect($event)" accept="image/*">
        <ion-icon name="camera"></ion-icon>
      </ion-button>
    </div>

    <ion-list class="lista_datos">
      <ion-item class="item_user">
        <ion-label position="stacked">Nombre</ion-label>
        <input [(ngModel)]="userProfile.nombre" [readonly]="!isEditing">
      </ion-item>

      <ion-item class="item_user">
        <ion-label position="stacked">Apellido</ion-label>
        <input [(ngModel)]="userProfile.apellido" [readonly]="!isEditing">
      </ion-item>

      <ion-item class="item_user">
        <ion-label position="stacked">Email</ion-label>
        <input [(ngModel)]="userProfile.email" [readonly]="!isEditing">
      </ion-item>
    </ion-list>

    <div class="button-container">
      <ng-container *ngIf="!isEditing">
        <ion-button class="Editara_perfil" expand="block" (click)="toggleEdit()">
          Editar Perfil
        </ion-button>
      </ng-container>

      <ng-container *ngIf="isEditing">
        <ion-button expand="block" color="success" class="Editara_perfil" (click)="updateProfile()">
          Guardar Cambios
        </ion-button>
        <ion-button expand="block" color="medium" class="Editara_perfil" (click)="cancelEdit()">
          Cancelar
        </ion-button>
      </ng-container>
    </div>

    <ion-list class="lista_datos">
      <ion-item button (click)="goToHome()" class="item_user">
        <ion-label>Volver a la home</ion-label>
      </ion-item>

      <ion-item button class="item_user" (click)="Gotorutas()">
        <ion-label>Mis Rutas Favoritas</ion-label>
      </ion-item>

      <ion-item button class="item_user">
        <ion-label>Historial de Rutas</ion-label>
      </ion-item>

      <ion-item button (click)="misRutas()" class="item_user">
        <ion-label>Mis Rutas</ion-label>
      </ion-item>

      <ion-item button class="item_user">
        <ion-label>Configuración</ion-label>
      </ion-item>
      
      <div class="button-container">
        <ion-button class="logout-button" expand="block"  (click)="logout()" style="color: white;">
          Cerrar Sesión
        </ion-button>
      </div>

    </ion-list>
  </div>
</ion-content>